/*
 * fogLoader, an ajax modal loader supporting jQuery UI themes
 * by Corbin Camp - ccamp@onebox.com @corbincamp
 * Version 1.1.2
 * Created 2014
 * License: GPL
 * 
 */
(function($){var n=0;var o;$.fn.fogLoader=function(i){var j={message:'Loading',animated:false,closeOnEscape:true,width:135,height:25,maxWidth:false,maxHeight:false,minWidth:20,minHeight:15,position:'center',text:{align:'center',wrap:'nowrap'},font:{family:null,size:null,weight:null},border:{radius:null,wdith:'1px'},spell:false,style:'message',activityChar:'.',progress:{val:0,max:10,text:null,loc:'inside',shadow:false,delay:250}};var k=null;var l=1;var m={close:function(){$('.ui-progressbar, .ui-progressbar-msg, .progress-label').remove();clearInterval(o);$(this).dialog('close')},destroy:function(){$('.ui-progressbar, .ui-progressbar-msg, .progress-label').remove();clearInterval(o);$(this).dialog('destroy')},progressValue:function(){return n},updateProgress:function(a){fillProgressBar(a)}};if(typeof i==='object'||!i){k=$.extend({},j,i)}else{if(m[i]){return m[i].apply(this,Array.prototype.slice.call(arguments,1))}else{$.error('_method '+i+' does not exist on jQuery.fogLoader')}};function fillProgressBar(a){n=a.value;if(a.msg){$('.progress-label').html(a.msg)}$('.ui-progressbar-value').css('width',n+'%').show();if(n>=100){$('.ui-progressbar-value').css('width','102%').addClass('ui-corner-all')}}$(this).each(function(){var c='#ui-dialog-title-'+$(this).attr('id');var d;if(k.style=='message'){if(k.animated){if(k.progressSpell){d=k.message.substring(0,1)}else{d=k.message}}else{d=k.message+'...'}}$(this).dialog({modal:true,resizable:false,closeText:'',draggable:false,closeOnEscape:k.closeOnEscape,height:k.height,width:k.width,maxHeight:k.maxHeight,minHeight:k.minHeight,maxWidth:k.maxWidth,minWidth:k.minWidth,position:k.position,title:d,beforeclose:function(a,b){$('#ui-dialog-title-loader-progressbar').remove();clearInterval(o);$(this).dialog('destroy')}});var e=$('.ui-dialog-titlebar');e.show().addClass('ui-state-default').removeClass('ui-widget-header').css({whiteSpace:k.text.wrap,'border-width':'0px'});if(k.fontSize){ttl.css({fontSize:k.font.size})}if(k.fontFamily){ttl.css({fontFamily:k.font.family})}if(k.fontWeight){e.css({fontWeight:k.font.weight})}$('.ui-dialog-titlebar-close').remove();$('.ui-dialog').css({padding:'0',borderWidth:k.border.width});if(k.border.radius){$('.ui-dialog, .ui-dialog-titlebar').css({'-moz-border-radius':k.border.radius,'-webkit-border-radius':k.border.radius})};if(k.style=='progressbar'){var f=$('<div>').attr('id',c+'-'+k.style).css('height',(k.height-5)+'px').progressbar({value:k.progress.value,max:k.progress.max});var g=$('.ui-progressbar-value');e.hide();$(this).css({height:'auto',padding:1,overflow:'hidden'});if(k.progress.message){var h=$('<div>').addClass('progress-label').html(k.progress.message).css({fontSize:'.75em'});if(k.progress.loc=='top'){h.css({margin:'1px'});$(this).append(h)}else{if(k.progress.loc!='bottom'){h.css({position:'absolute',left:'50%',top:'1px',fontWeight:'bold',textShadow:'1px 1px 0 '+k.progress.shadow?'#fff':''});f.append(h)}}}$(this).append(f);if(k.progress.loc=='bottom'){$(this).append(h)}g.css('margin','-2px');if(!$.support.htmlSerialize){g.css('height',(k.height+5)+'px')}$('.ui-dialog .ui-widget-content').css('border-width','0px');if(k.progress.value!==false){fillProgressBar({val:k.progress.value})}}else{$(this).hide()}if(k.animated&&k.style!='progressbar'){k.progress.max=k.message.length+3;if(k.spell){$('.ui-dialog-title').html(k.message.substring(0,1))}o=setInterval(function(){var a=$('.ui-dialog-title').html();if(!a){clearInterval(o)}else{if(a.length<(k.message.length+(k.progress.max-k.message.length))){if(k.spell&&k.animated){if(l<k.message.length){a+=k.message.substring(l,l+1)}else{a+=k.activityChar}l++}else{a+=k.activityChar}}else{l=1;a=k.spell?k.message.substring(0,1):k.message}$('.ui-dialog-title').html(a)}},k.progress.delay)};$('.ui-widget-overlay').css('position','fixed')})}})(jQuery);